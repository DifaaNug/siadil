<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIADIL - Panduan Presentasi Demo & Code</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: flex;
            min-height: 90vh;
            overflow: hidden;
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            padding: 30px 20px;
            overflow-y: auto;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 13px;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        .nav-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #fbbf24;
            padding-left: 20px;
        }

        .nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: #60a5fa;
            font-weight: 600;
        }

        .content {
            flex: 1;
            padding: 40px 50px;
            overflow-y: auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #1e3a8a;
            margin-bottom: 25px;
            font-size: 32px;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 15px;
        }

        h2 {
            color: #1e40af;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 24px;
        }

        h3 {
            color: #3b82f6;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .card {
            background: #f8fafc;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .highlight {
            background: #fef3c7;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #92400e;
        }

        code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 13px;
            line-height: 1.6;
        }

        .file-path {
            background: #dbeafe;
            color: #1e40af;
            padding: 8px 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 13px;
            display: inline-block;
            margin: 10px 0;
        }

        .badge {
            background: #10b981;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin: 5px 5px 5px 0;
        }

        .badge.red { background: #ef4444; }
        .badge.yellow { background: #f59e0b; }
        .badge.blue { background: #3b82f6; }
        .badge.purple { background: #8b5cf6; }

        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 10px;
            margin: 8px 0;
            background: #f0fdf4;
            border-left: 3px solid #10b981;
            border-radius: 6px;
        }

        .checklist li:before {
            content: "‚úì ";
            color: #10b981;
            font-weight: bold;
            margin-right: 8px;
        }

        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .success {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .info {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        ul, ol {
            margin-left: 25px;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .flow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        .flow-step:before {
            content: "‚Üí";
            margin-right: 15px;
            font-size: 24px;
            font-weight: bold;
        }

        .step-number {
            background: #3b82f6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        th {
            background: #1e40af;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        tr:hover {
            background: #f9fafb;
        }

        @media print {
            .sidebar { display: none; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">SIADIL</div>
            <div class="subtitle">Panduan Demo & Code</div>

            <div class="nav-item active" onclick="showSection('prep')">‚ö° Persiapan</div>
            <div class="nav-item" onclick="showSection('demo')">üé¨ Demo Flow</div>
            <div class="nav-item" onclick="showSection('mvc')">üìê MVC Pattern</div>
            <div class="nav-item" onclick="showSection('oop')">üéØ OOP & Relationships</div>
            <div class="nav-item" onclick="showSection('algoritma')">üî¢ Algoritma</div>
            <div class="nav-item" onclick="showSection('upload')">üì§ File Upload</div>
            <div class="nav-item" onclick="showSection('security')">üîí Security</div>
            <div class="nav-item" onclick="showSection('database')">üóÑÔ∏è Database</div>
            <div class="nav-item" onclick="showSection('kuk')">üìã KUK (Ringkas)</div>
            <div class="nav-item" onclick="showSection('qa')">üí¨ Q&A</div>
        </div>

        <div class="content">
            <!-- PERSIAPAN -->
            <div id="prep" class="section active">
                <h1>‚ö° Persiapan Presentasi</h1>

                <div class="warning">
                    <strong>‚è∞ Waktu Total: 40 Menit</strong><br>
                    Demo (10 min) ‚Ä¢ Code (10 min) ‚Ä¢ KUK (8 min) ‚Ä¢ Q&A (8 min) ‚Ä¢ Buffer (4 min)
                </div>

                <h2>Checklist Sebelum Mulai</h2>
                <ul class="checklist">
                    <li>Start server: <code>php artisan serve</code></li>
                    <li>Buka browser: <code>http://127.0.0.1:8000</code></li>
                    <li>Buka VS Code dengan file-file penting</li>
                    <li>Siapkan 2-3 sample files (PDF, DOCX, JPG)</li>
                    <li>Buka <strong>kuk-mapping.html</strong> di tab terpisah</li>
                    <li>Buka file panduan ini di tab lain</li>
                    <li>Database kosong (fresh migration)</li>
                    <li>Test internet connection (jika perlu)</li>
                </ul>

                <h2>File Penting untuk Dibuka di VS Code</h2>
                <div class="card">
                    <h3>Controllers</h3>
                    <ul>
                        <li><span class="file-path">app/Http/Controllers/DocumentController.php</span> - Line 68-116 (algoritma)</li>
                        <li><span class="file-path">app/Http/Controllers/DashboardController.php</span></li>
                        <li><span class="file-path">app/Http/Controllers/CategoryController.php</span></li>
                    </ul>

                    <h3>Models</h3>
                    <ul>
                        <li><span class="file-path">app/Models/Document.php</span> - Line 55-65 (relationships)</li>
                        <li><span class="file-path">app/Models/Category.php</span></li>
                        <li><span class="file-path">app/Models/ActivityLog.php</span></li>
                    </ul>

                    <h3>Views</h3>
                    <ul>
                        <li><span class="file-path">resources/views/layouts/main.blade.php</span></li>
                        <li><span class="file-path">resources/views/dashboard.blade.php</span></li>
                        <li><span class="file-path">resources/views/documents/show.blade.php</span> - Line 125-140 (preview)</li>
                    </ul>

                    <h3>Routes & Config</h3>
                    <ul>
                        <li><span class="file-path">routes/web.php</span></li>
                        <li><span class="file-path">database/migrations/</span></li>
                    </ul>
                </div>

                <h2>Mental Preparation</h2>
                <div class="success">
                    <strong>‚úÖ Tips Sukses:</strong>
                    <ul style="margin-top: 10px;">
                        <li>Tarik napas dalam-dalam</li>
                        <li>Percaya diri dengan aplikasi yang sudah dibuat</li>
                        <li>Fokus ke fitur yang paling dikuasai</li>
                        <li>Kalau nervous, pelan-pelan saja</li>
                        <li>Senyum dan eye contact dengan penguji</li>
                    </ul>
                </div>
            </div>

            <!-- DEMO FLOW -->
            <div id="demo" class="section">
                <h1>üé¨ Demo Flow (10 Menit)</h1>

                <div class="info">
                    <strong>üéØ Tujuan Demo:</strong> Tunjukkan aplikasi berjalan dengan baik dan highlight fitur-fitur utama, terutama auto-generate document number dan multi-user isolation.
                </div>

                <h2>Step 1: Register & Login (1 menit)</h2>
                <div class="card">
                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Klik "Register"</strong><br>
                            Isi: Nama = "User Test", Email = "test@example.com", Password = "12345678"
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Auto-redirect ke Dashboard</strong><br>
                            Tunjukkan: "Selamat datang User Test!"
                        </div>
                    </div>
                </div>

                <h2>Step 2: Dashboard Overview (1 menit)</h2>
                <div class="card">
                    <ul>
                        <li>Tunjukkan statistik: 0 Dokumen, 0 KB, 0 Kategori</li>
                        <li>Jelaskan layout: Sidebar navigation (fixed) + Content area</li>
                        <li>Highlight: "UI clean tanpa icon, fokus ke fungsi"</li>
                        <li><strong>Show code:</strong> <code>DashboardController.php</code> - statistics query</li>
                    </ul>
                </div>

                <h2>Step 3: Create Kategori (1.5 menit)</h2>
                <div class="card">
                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Klik "Kategori" di sidebar</strong><br>
                            Kosong - belum ada kategori
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Klik "Tambah Kategori"</strong><br>
                            Isi: Nama = "Surat Masuk", Warna = Biru (#3b82f6)
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">3</span>
                        <div>
                            <strong>Klik "Simpan"</strong><br>
                            Flash message: "Kategori berhasil ditambahkan!"
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">4</span>
                        <div>
                            <strong>Show code:</strong> <code>CategoryController@store()</code><br>
                            Tunjukkan: Validation, create, activity log
                        </div>
                    </div>
                </div>

                <h2>Step 4: Upload Dokumen (3 menit) ‚≠ê FOKUS</h2>
                <div class="card">
                    <div class="warning">
                        <strong>‚ö†Ô∏è INI BAGIAN PALING PENTING!</strong><br>
                        Highlight: Auto-generate document number dengan format KODE/YYYY/MM/XXXX
                    </div>

                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Klik "Dokumen" ‚Üí "Tambah Dokumen"</strong>
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Isi form:</strong><br>
                            Kategori: Surat Masuk<br>
                            Judul: "Surat Undangan Rapat"<br>
                            Deskripsi: "Undangan rapat evaluasi"<br>
                            File: Upload sample PDF
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">3</span>
                        <div>
                            <strong>Field Nomor Dokumen KOSONG</strong><br>
                            Jelaskan: "Nomor otomatis ter-generate oleh sistem"
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">4</span>
                        <div>
                            <strong>Klik "Simpan"</strong><br>
                            Success message muncul
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">5</span>
                        <div>
                            <strong>HIGHLIGHT: Nomor = SM/2026/02/0001</strong><br>
                            Jelaskan format: KODE_KATEGORI/TAHUN/BULAN/NOMOR_URUT
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">6</span>
                        <div>
                            <strong>Show code: DocumentController.php Line 68-92</strong><br>
                            <code>generateDocumentNumber()</code> method<br>
                            Jelaskan algoritma step by step
                        </div>
                    </div>
                </div>

                <h2>Step 5: Preview Dokumen (1.5 menit)</h2>
                <div class="card">
                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Klik "Lihat" pada dokumen</strong>
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Detail page muncul</strong><br>
                            Metadata: Judul, Nomor, Kategori, File Size, dll
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">3</span>
                        <div>
                            <strong>Preview PDF tampil di iframe</strong><br>
                            Bisa scroll di dalam preview
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">4</span>
                        <div>
                            <strong>Show code: show.blade.php Line 125-140</strong><br>
                            Logic: If PDF ‚Üí iframe, If Image ‚Üí img tag, Else ‚Üí download message
                        </div>
                    </div>
                </div>

                <h2>Step 6: Activity Logs (1 menit)</h2>
                <div class="card">
                    <ul>
                        <li>Klik "Log Aktivitas" di sidebar</li>
                        <li>Show: Log "Membuat kategori", "Membuat dokumen"</li>
                        <li>Timestamp dengan diffForHumans (e.g., "2 menit yang lalu")</li>
                        <li><strong>Show code:</strong> <code>ActivityLog.php</code> boot method</li>
                    </ul>
                </div>

                <h2>Step 7: Multi-User Test (1 menit) ‚≠ê</h2>
                <div class="card">
                    <div class="warning">
                        <strong>‚ö†Ô∏è INI UNTUK TUNJUKKAN DATA ISOLATION!</strong>
                    </div>

                    <div class="flow-step">
                        <span class="step-number">1</span>
                        <div>
                            <strong>Logout dari User pertama</strong>
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">2</span>
                        <div>
                            <strong>Register user baru:</strong><br>
                            Email = "user2@example.com"
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">3</span>
                        <div>
                            <strong>Dashboard User 2 = KOSONG!</strong><br>
                            0 Dokumen, 0 Kategori
                        </div>
                    </div>
                    <div class="flow-step">
                        <span class="step-number">4</span>
                        <div>
                            <strong>Jelaskan:</strong> "Data user 1 tidak terlihat oleh user 2"<br>
                            <strong>Show code:</strong> <code>DocumentController@index()</code> Line 25<br>
                            <code>where('user_id', auth()->id())</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MVC PATTERN -->
            <div id="mvc" class="section">
                <h1>üìê MVC Pattern (KUK 017)</h1>

                <div class="success">
                    <strong>‚úÖ Definisi MVC:</strong><br>
                    Model-View-Controller adalah design pattern untuk memisahkan logic, data, dan presentasi sehingga aplikasi lebih terstruktur, maintainable, dan scalable.
                </div>

                <h2>Diagram Flow</h2>
                <div class="flow">
                    <div class="flow-step"><strong>1. User Request</strong> ‚Üí http://localhost/documents</div>
                    <div class="flow-step"><strong>2. Route</strong> ‚Üí routes/web.php menangkap request</div>
                    <div class="flow-step"><strong>3. Controller</strong> ‚Üí DocumentController@index()</div>
                    <div class="flow-step"><strong>4. Model</strong> ‚Üí Document::where('user_id')->get()</div>
                    <div class="flow-step"><strong>5. Database</strong> ‚Üí Query SELECT * FROM documents</div>
                    <div class="flow-step"><strong>6. Controller</strong> ‚Üí return view() dengan data</div>
                    <div class="flow-step"><strong>7. View</strong> ‚Üí index.blade.php render HTML</div>
                    <div class="flow-step"><strong>8. Response</strong> ‚Üí Browser tampilkan halaman</div>
                </div>

                <h2>Model (M)</h2>
                <div class="card">
                    <p><span class="file-path">app/Models/Document.php</span></p>
                    <p><strong>Tanggung Jawab:</strong></p>
                    <ul>
                        <li>Representasi data (table documents)</li>
                        <li>Business logic</li>
                        <li>Relationships dengan model lain</li>
                        <li>Query scopes untuk reusable queries</li>
                        <li>Accessors & Mutators</li>
                    </ul>
                    <p><strong>Contoh Code:</strong></p>
                    <pre>class Document extends Model
{
    // Relationships
    public function user() {
        return $this->belongsTo(User::class);
    }

    public function category() {
        return $this->belongsTo(Category::class);
    }

    // Scopes
    public function scopeSearch($query, $search) {
        return $query->where('title', 'like', "%{$search}%");
    }
}</pre>
                </div>

                <h2>View (V)</h2>
                <div class="card">
                    <p><span class="file-path">resources/views/documents/index.blade.php</span></p>
                    <p><strong>Tanggung Jawab:</strong></p>
                    <ul>
                        <li>Presentation layer (HTML)</li>
                        <li>Display data dari controller</li>
                        <li>Form untuk user input</li>
                        <li>TIDAK boleh ada query atau business logic</li>
                    </ul>
                    <p><strong>Contoh Code:</strong></p>
                    <pre>@foreach($documents as $doc)
    &lt;tr&gt;
        &lt;td&gt;{{ $doc->title }}&lt;/td&gt;
        &lt;td&gt;{{ $doc->document_number }}&lt;/td&gt;
        &lt;td&gt;{{ $doc->category->name }}&lt;/td&gt;
    &lt;/tr&gt;
@endforeach</pre>
                </div>

                <h2>Controller (C)</h2>
                <div class="card">
                    <p><span class="file-path">app/Http/Controllers/DocumentController.php</span></p>
                    <p><strong>Tanggung Jawab:</strong></p>
                    <ul>
                        <li>Handle HTTP request</li>
                        <li>Bridge antara Model dan View</li>
                        <li>Validation input user</li>
                        <li>Process data dari Model</li>
                        <li>Return view dengan data</li>
                    </ul>
                    <p><strong>Contoh Code:</strong></p>
                    <pre>public function index()
{
    // Ambil data dari Model
    $documents = Document::where('user_id', auth()->id())
        ->with(['category', 'user'])
        ->latest()
        ->paginate(15);

    // Return View dengan data
    return view('documents.index', compact('documents'));
}</pre>
                </div>

                <h2>Keuntungan MVC</h2>
                <div class="card">
                    <ul>
                        <li><strong>Separation of Concerns:</strong> Setiap layer punya tanggung jawab jelas</li>
                        <li><strong>Reusability:</strong> Model bisa digunakan oleh banyak controller</li>
                        <li><strong>Maintainability:</strong> Mudah update karena tidak tightly coupled</li>
                        <li><strong>Testability:</strong> Bisa test controller, model, view secara terpisah</li>
                        <li><strong>Team Collaboration:</strong> Frontend dev kerja di views, backend di controllers/models</li>
                        <li><strong>Scalability:</strong> Mudah add fitur baru tanpa break existing code</li>
                    </ul>
                </div>
            </div>

            <!-- OOP & RELATIONSHIPS -->
            <div id="oop" class="section">
                <h1>üéØ OOP & Relationships (KUK 018)</h1>

                <h2>OOP Principles Implemented</h2>

                <h3>1. Inheritance (Pewarisan)</h3>
                <div class="card">
                    <p><strong>Definisi:</strong> Child class mewarisi properties & methods dari parent class</p>
                    <pre>class Document extends Model  // Document mewarisi dari Eloquent Model
{
    // Otomatis punya methods: save(), delete(), find(), create(), dll
}</pre>
                    <p><strong>Benefit:</strong> Tidak perlu tulis ulang CRUD methods, sudah ada di parent Model</p>
                </div>

                <h3>2. Encapsulation</h3>
                <div class="card">
                    <p><strong>Definisi:</strong> Hide internal details, expose hanya yang perlu</p>
                    <pre>class Document extends Model
{
    // Protected - hanya bisa diakses dari dalam class
    protected $fillable = ['title', 'category_id', 'user_id'];
    protected $hidden = ['deleted_at'];
    protected $casts = ['tags' => 'array'];

    // Public - bisa diakses dari luar
    public function getFileUrlAttribute() {
        return asset('storage/' . $this->file_path);
    }
}</pre>
                    <p><strong>Benefit:</strong> Kontrol akses data, prevent mass assignment vulnerability</p>
                </div>

                <h3>3. Polymorphism</h3>
                <div class="card">
                    <p><strong>Definisi:</strong> Same interface, different implementation</p>
                    <pre>// Semua models punya method delete() tapi behaviour berbeda
$document->delete();  // Soft delete (SoftDeletes trait)
$category->delete();  // Soft delete
$log->delete();       // Hard delete (no SoftDeletes)</pre>
                </div>

                <h3>4. Abstraction</h3>
                <div class="card">
                    <p><strong>Definisi:</strong> Hide complex logic, show simple interface</p>
                    <pre>// User tidak perlu tahu detail query, cukup panggil method
$documents = Document::search($keyword)->active()->get();

// Behind the scenes: WHERE title LIKE '%keyword%' AND status='active'</pre>
                </div>

                <h2>Eloquent Relationships</h2>

                <h3>belongsTo (Many-to-One)</h3>
                <div class="card">
                    <p><span class="file-path">app/Models/Document.php</span> Line 55-65</p>
                    <pre>// Document belongs to User
public function user() {
    return $this->belongsTo(User::class);
}

// Document belongs to Category
public function category() {
    return $this->belongsTo(Category::class);
}</pre>
                    <p><strong>Usage:</strong></p>
                    <pre>$document = Document::find(1);
echo $document->user->name;      // "User Test"
echo $document->category->name;  // "Surat Masuk"</pre>
                </div>

                <h3>hasMany (One-to-Many)</h3>
                <div class="card">
                    <p><span class="file-path">app/Models/User.php</span></p>
                    <pre>// User has many Documents
public function documents() {
    return $this->hasMany(Document::class);
}

// User has many ActivityLogs
public function activityLogs() {
    return $this->hasMany(ActivityLog::class);
}</pre>
                    <p><strong>Usage:</strong></p>
                    <pre>$user = User::find(1);
$userDocs = $user->documents;  // Collection of documents
$count = $user->documents()->count();  // Integer</pre>
                </div>

                <h2>Traits</h2>
                <div class="card">
                    <p><strong>SoftDeletes Trait:</strong></p>
                    <pre>use Illuminate\Database\Eloquent\SoftDeletes;

class Category extends Model
{
    use SoftDeletes;  // Add soft delete functionality

    // Otomatis punya:
    // - deleted_at column
    // - delete() method (soft)
    // - restore() method
    // - forceDelete() method (hard)
    // - withTrashed() scope
}</pre>
                    <p><strong>Benefit:</strong> Reusable code tanpa inheritance, bisa mix multiple traits</p>
                </div>

                <h2>Accessors & Mutators</h2>
                <div class="card">
                    <h3>Accessor (Getter)</h3>
                    <pre>// Auto-format attribute saat diambil
public function getFileUrlAttribute() {
    return asset('storage/' . $this->file_path);
}

// Usage
echo $document->file_url;  // Otomatis call accessor</pre>

                    <h3>Mutator (Setter)</h3>
                    <pre>// Auto-format attribute saat di-set
public function setTitleAttribute($value) {
    $this->attributes['title'] = ucwords(strtolower($value));
}

// Usage
$document->title = "JUDUL DOKUMEN";  // Disimpan: "Judul Dokumen"</pre>
                </div>
            </div>

            <!-- ALGORITMA -->
            <div id="algoritma" class="section">
                <h1>üî¢ Algoritma Auto-Generate Document Number (KUK 022)</h1>

                <div class="warning">
                    <strong>‚ö†Ô∏è INI ALGORITMA PALING PENTING DI PRESENTASI!</strong><br>
                    Waktu: 3 menit dari 10 menit code explanation
                </div>

                <h2>Requirement</h2>
                <div class="card">
                    <p><strong>Format:</strong> <span class="highlight">KODE_KATEGORI/TAHUN/BULAN/NOMOR_URUT</span></p>
                    <p><strong>Contoh:</strong></p>
                    <ul>
                        <li>SM/2026/02/0001 (Surat Masuk pertama di Feb 2026)</li>
                        <li>SM/2026/02/0002 (Surat Masuk kedua di Feb 2026)</li>
                        <li>SK/2026/02/0001 (Surat Keluar pertama di Feb 2026)</li>
                        <li>SM/2026/03/0001 (Surat Masuk pertama di Mar 2026 - reset counter)</li>
                    </ul>
                </div>

                <h2>Step-by-Step Algoritma</h2>
                <div class="card">
                    <p><span class="file-path">app/Http/Controllers/DocumentController.php</span> Line 68-92</p>

                    <h3>Step 1: Ambil Kategori</h3>
                    <pre>$category = Category::find($categoryId);
// Misal: Category { id: 1, name: "Surat Masuk" }</pre>

                    <h3>Step 2: Generate Kode Kategori</h3>
                    <pre>$categoryCode = $this->generateCategoryCode($category->name);
// "Surat Masuk" ‚Üí "SM"</pre>

                    <h3>Step 3: Get Year & Month</h3>
                    <pre>$year = date('Y');   // "2026"
$month = date('m');  // "02"</pre>

                    <h3>Step 4: Build Prefix</h3>
                    <pre>$prefix = "{$categoryCode}/{$year}/{$month}/";
// "SM/2026/02/"</pre>

                    <h3>Step 5: Query Last Document</h3>
                    <pre>$lastDoc = Document::where('document_number', 'like', $prefix . '%')
    ->orderBy('document_number', 'desc')
    ->first();
// Query: SELECT * FROM documents
//        WHERE document_number LIKE 'SM/2026/02/%'
//        ORDER BY document_number DESC
//        LIMIT 1</pre>

                    <h3>Step 6: Extract & Increment Number</h3>
                    <pre>if ($lastDoc) {
    // Misal last number: "SM/2026/02/0003"
    $lastNumber = substr($lastDoc->document_number, -4);  // "0003"
    $lastNumber = intval($lastNumber);                     // 3
    $newNumber = $lastNumber + 1;                          // 4
    $newNumber = str_pad($newNumber, 4, '0', STR_PAD_LEFT); // "0004"
} else {
    $newNumber = '0001';  // First document
}</pre>

                    <h3>Step 7: Return Final Number</h3>
                    <pre>return $prefix . $newNumber;
// "SM/2026/02/0004"</pre>
                </div>

                <h2>Category Code Mapping</h2>
                <div class="card">
                    <p><span class="file-path">app/Http/Controllers/DocumentController.php</span> Line 97-116</p>
                    <pre>private function generateCategoryCode($name)
{
    $mapping = [
        'Surat Masuk'   => 'SM',
        'Surat Keluar'  => 'SK',
        'Invoice'       => 'INV',
        'Kontrak'       => 'KTR',
        'Laporan'       => 'LPR',
        'Sertifikat'    => 'SRT',
    ];

    // Exact match
    if (isset($mapping[$name])) {
        return $mapping[$name];
    }

    // Fallback: ambil 3 huruf pertama uppercase
    return strtoupper(substr(str_replace(' ', '', $name), 0, 3));
    // "Surat Penting" ‚Üí "SUR"
}</pre>
                </div>

                <h2>Testing Scenarios</h2>
                <div class="card">
                    <table>
                        <tr>
                            <th>Kategori</th>
                            <th>Bulan</th>
                            <th>Sequence</th>
                            <th>Result</th>
                        </tr>
                        <tr>
                            <td>Surat Masuk</td>
                            <td>Feb 2026</td>
                            <td>1st</td>
                            <td>SM/2026/02/0001</td>
                        </tr>
                        <tr>
                            <td>Surat Masuk</td>
                            <td>Feb 2026</td>
                            <td>2nd</td>
                            <td>SM/2026/02/0002</td>
                        </tr>
                        <tr>
                            <td>Surat Keluar</td>
                            <td>Feb 2026</td>
                            <td>1st</td>
                            <td>SK/2026/02/0001</td>
                        </tr>
                        <tr>
                            <td>Surat Masuk</td>
                            <td>Mar 2026</td>
                            <td>1st (reset)</td>
                            <td>SM/2026/03/0001</td>
                        </tr>
                    </table>
                </div>

                <h2>Kompleksitas Algoritma</h2>
                <div class="card">
                    <ul>
                        <li><strong>Time Complexity:</strong> O(1) - Hanya 1 query untuk get last document</li>
                        <li><strong>Space Complexity:</strong> O(1) - Variabel konstan</li>
                        <li><strong>Scalability:</strong> Bisa handle ribuan dokumen per bulan tanpa masalah</li>
                        <li><strong>Database Load:</strong> Minimal - WHERE + ORDER BY + LIMIT 1 (fast query)</li>
                    </ul>
                </div>
            </div>

            <!-- FILE UPLOAD -->
            <div id="upload" class="section">
                <h1>üì§ File Upload System (KUK 030)</h1>

                <h2>Upload Flow</h2>
                <div class="flow">
                    <div class="flow-step"><strong>1. Form Submit</strong> ‚Üí User pilih file + metadata</div>
                    <div class="flow-step"><strong>2. Validation</strong> ‚Üí Check type, size, required fields</div>
                    <div class="flow-step"><strong>3. Generate Filename</strong> ‚Üí UUID untuk prevent collision</div>
                    <div class="flow-step"><strong>4. Store File</strong> ‚Üí Save ke storage/app/public/documents</div>
                    <div class="flow-step"><strong>5. Save Metadata</strong> ‚Üí Insert ke database</div>
                    <div class="flow-step"><strong>6. Activity Log</strong> ‚Üí Record action</div>
                    <div class="flow-step"><strong>7. Redirect</strong> ‚Üí Success message + redirect</div>
                </div>

                <h2>Validation</h2>
                <div class="card">
                    <p><span class="file-path">DocumentController.php</span> Line 131-146</p>
                    <pre>$validated = $request->validate([
    'category_id' => 'required|exists:categories,id',
    'title' => 'required|string|max:255',
    'description' => 'nullable|string',
    'file' => 'required|file|mimes:pdf,doc,docx,xls,xlsx,ppt,pptx,jpg,jpeg,png|max:10240',
    'document_date' => 'nullable|date',
    'expiry_date' => 'nullable|date|after:document_date',
    'status' => 'nullable|in:active,archived,expired',
]);</pre>

                    <p><strong>Validation Rules:</strong></p>
                    <ul>
                        <li><code>required</code> - Field harus diisi</li>
                        <li><code>exists:categories,id</code> - Category harus ada di database</li>
                        <li><code>mimes:pdf,doc,...</code> - Tipe file yang diperbolehkan</li>
                        <li><code>max:10240</code> - Max size 10MB (10240 KB)</li>
                        <li><code>after:document_date</code> - expiry_date harus setelah document_date</li>
                    </ul>
                </div>

                <h2>File Processing</h2>
                <div class="card">
                    <p><span class="file-path">DocumentController.php</span> Line 147-160</p>

                    <h3>Step 1: Get File Object</h3>
                    <pre>$file = $request->file('file');</pre>

                    <h3>Step 2: Generate Unique Filename</h3>
                    <pre>use Illuminate\Support\Str;

$filename = Str::uuid() . '.' . $file->getClientOriginalExtension();
// "a3f5b8c1-4e2d-9a7b-3c6d-1f8e4b9a2c7d.pdf"</pre>
                    <p><strong>Why UUID?</strong></p>
                    <ul>
                        <li>Prevent duplicate filenames</li>
                        <li>Prevent collision pada concurrent uploads</li>
                        <li>Security - hide original filename</li>
                    </ul>

                    <h3>Step 3: Store File</h3>
                    <pre>$path = $file->storeAs('documents', $filename, 'public');
// Disimpan di: storage/app/public/documents/[uuid].pdf</pre>

                    <h3>Step 4: Save Metadata</h3>
                    <pre>$validated['file_name'] = $file->getClientOriginalName();  // "Laporan.pdf"
$validated['file_path'] = $path;                          // "documents/[uuid].pdf"
$validated['file_type'] = $file->getMimeType();           // "application/pdf"
$validated['file_size'] = $file->getSize();               // 1048576 (bytes)
$validated['user_id'] = auth()->id();
$validated['document_number'] = $this->generateDocumentNumber($validated['category_id']);</pre>

                    <h3>Step 5: Create Record</h3>
                    <pre>try {
    $document = Document::create($validated);

    return redirect()
        ->route('documents.show', $document)
        ->with('success', 'Dokumen berhasil ditambahkan!');

} catch (\Exception $e) {
    // Delete uploaded file jika DB insert gagal
    Storage::disk('public')->delete($path);

    return redirect()
        ->back()
        ->with('error', 'Gagal menambahkan dokumen: ' . $e->getMessage());
}</pre>
                </div>

                <h2>Storage Link</h2>
                <div class="card">
                    <p><strong>Command:</strong></p>
                    <pre>php artisan storage:link</pre>
                    <p><strong>Fungsi:</strong> Create symbolic link dari <code>public/storage</code> ke <code>storage/app/public</code></p>
                    <p><strong>Kenapa Perlu?</strong> File di storage/app tidak bisa diakses publik. Dengan symlink, bisa akses via URL:</p>
                    <pre>http://localhost/storage/documents/[uuid].pdf</pre>
                </div>

                <h2>File Preview</h2>
                <div class="card">
                    <p><span class="file-path">resources/views/documents/show.blade.php</span> Line 125-140</p>

                    <h3>PDF Preview</h3>
                    <pre>@if($document->file_type == 'application/pdf')
    &lt;iframe src="{{ $document->file_url }}"
            style="width: 100%; height: 600px; border: none;"&gt;
    &lt;/iframe&gt;
@endif</pre>

                    <h3>Image Preview</h3>
                    <pre>@elseif(in_array($document->file_type, ['image/jpeg', 'image/png', 'image/jpg']))
    &lt;img src="{{ $document->file_url }}"
         alt="{{ $document->title }}"
         style="max-width: 100%; height: auto;"&gt;
@endif</pre>

                    <h3>Office Files (No Preview)</h3>
                    <pre>@else
    &lt;div class="alert alert-info"&gt;
        Pratinjau tidak tersedia untuk tipe file ini.
        Silakan klik tombol Unduh untuk melihat isinya.
    &lt;/div&gt;
@endif</pre>
                </div>

                <h2>Download System</h2>
                <div class="card">
                    <p><span class="file-path">DocumentController.php</span> Line 301-310</p>
                    <pre>public function download(Document $document)
{
    // Authorization check
    if ($document->user_id !== auth()->id()) {
        abort(403, 'Unauthorized');
    }

    // Increment download counter
    $document->increment('download_count');

    // Force download
    return Storage::disk('public')->download(
        $document->file_path,
        $document->file_name
    );
}</pre>
                </div>
            </div>

            <!-- SECURITY -->
            <div id="security" class="section">
                <h1>üîí Security Implementation</h1>

                <h2>1. Authentication</h2>
                <div class="card">
                    <p><strong>Laravel Breeze:</strong> Built-in authentication system</p>
                    <ul>
                        <li>Register dengan email verification</li>
                        <li>Login dengan remember me</li>
                        <li>Logout</li>
                        <li>Password reset via email</li>
                        <li>Password hashing dengan bcrypt</li>
                    </ul>
                    <pre>// Middleware Auth
Route::middleware(['auth'])->group(function() {
    // Protected routes
});</pre>
                </div>

                <h2>2. Authorization</h2>
                <div class="card">
                    <p><strong>User-based Access Control:</strong></p>
                    <pre>// Hanya owner yang bisa akses
if ($document->user_id !== auth()->id()) {
    abort(403, 'Unauthorized');
}</pre>
                    <p><strong>Implementation di:</strong></p>
                    <ul>
                        <li>show() - View document detail</li>
                        <li>edit() - Edit document</li>
                        <li>update() - Update document</li>
                        <li>destroy() - Delete document</li>
                        <li>download() - Download file</li>
                    </ul>
                </div>

                <h2>3. CSRF Protection</h2>
                <div class="card">
                    <p><strong>Cross-Site Request Forgery Prevention:</strong></p>
                    <pre>&lt;form method="POST" action="{{ route('documents.store') }}"&gt;
    @csrf  &lt;!-- Laravel auto-generate CSRF token --&gt;
    ...
&lt;/form&gt;</pre>
                    <p><strong>How it works:</strong></p>
                    <ul>
                        <li>Laravel generate unique token per session</li>
                        <li>Token disertakan di setiap form POST/PUT/DELETE</li>
                        <li>Server verify token sebelum process request</li>
                        <li>Jika token tidak valid ‚Üí 419 Page Expired</li>
                    </ul>
                </div>

                <h2>4. SQL Injection Prevention</h2>
                <div class="card">
                    <p><strong>Eloquent ORM & Parameter Binding:</strong></p>
                    <pre>// ‚úÖ SAFE - Eloquent auto-escape
Document::where('user_id', $userId)->get();

// ‚úÖ SAFE - Parameter binding
DB::select('SELECT * FROM documents WHERE user_id = ?', [$userId]);

// ‚ùå UNSAFE - Raw query tanpa binding
DB::select("SELECT * FROM documents WHERE user_id = $userId");</pre>
                    <p><strong>Semua query di aplikasi ini menggunakan Eloquent ORM!</strong></p>
                </div>

                <h2>5. XSS Prevention</h2>
                <div class="card">
                    <p><strong>Blade Auto-Escape:</strong></p>
                    <pre>// ‚úÖ SAFE - Auto escaped
{{ $document->title }}

// ‚ùå UNSAFE - Raw HTML (hanya untuk trusted content)
{!! $document->description !!}</pre>
                    <p><strong>Test XSS:</strong></p>
                    <ul>
                        <li>Input: <code>&lt;script&gt;alert('XSS')&lt;/script&gt;</code></li>
                        <li>Output: <code>&amp;lt;script&amp;gt;alert('XSS')&amp;lt;/script&amp;gt;</code> (escaped)</li>
                        <li>Result: Browser tampilkan sebagai text, tidak execute script</li>
                    </ul>
                </div>

                <h2>6. Mass Assignment Protection</h2>
                <div class="card">
                    <p><strong>$fillable Array:</strong></p>
                    <pre>class Document extends Model
{
    protected $fillable = [
        'category_id',
        'user_id',
        'title',
        'description',
        'file_name',
        // ... only allowed fields
    ];
}</pre>
                    <p><strong>Why Important?</strong></p>
                    <ul>
                        <li>Prevent attacker inject field yang tidak diinginkan</li>
                        <li>Misal: attacker kirim <code>is_admin=1</code> via form</li>
                        <li>Kalau tidak pakai $fillable, field itu bisa masuk DB</li>
                        <li>Dengan $fillable, hanya field yang listed yang bisa di-assign</li>
                    </ul>
                </div>

                <h2>7. File Upload Security</h2>
                <div class="card">
                    <ul>
                        <li><strong>Type Validation:</strong> Hanya PDF, Office, Images yang diperbolehkan</li>
                        <li><strong>Size Limit:</strong> Max 10MB untuk prevent DoS attack</li>
                        <li><strong>Unique Filename:</strong> UUID prevent file overwrite & path traversal</li>
                        <li><strong>Isolated Storage:</strong> File di storage/app, tidak di public root</li>
                        <li><strong>Authorization Check:</strong> Verify ownership sebelum download</li>
                    </ul>
                </div>

                <h2>Security Checklist</h2>
                <ul class="checklist">
                    <li>Authentication dengan Laravel Breeze ‚úì</li>
                    <li>Authorization check pada setiap action ‚úì</li>
                    <li>CSRF token pada semua form ‚úì</li>
                    <li>SQL Injection prevention dengan Eloquent ‚úì</li>
                    <li>XSS prevention dengan Blade escape ‚úì</li>
                    <li>Mass assignment protection ‚úì</li>
                    <li>File upload validation ‚úì</li>
                    <li>Password hashing ‚úì</li>
                    <li>HTTPS ready (production) ‚úì</li>
                </ul>
            </div>

            <!-- DATABASE -->
            <div id="database" class="section">
                <h1>üóÑÔ∏è Database Design</h1>

                <h2>ERD (Entity Relationship Diagram)</h2>
                <pre style="background: white; color: #333; border: 2px solid #e5e7eb;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      USERS       ‚îÇ           ‚îÇ   CATEGORIES     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ PK id            ‚îÇ           ‚îÇ PK id            ‚îÇ
‚îÇ    name          ‚îÇ           ‚îÇ    name          ‚îÇ
‚îÇ    email (UK)    ‚îÇ           ‚îÇ    slug (UK)     ‚îÇ
‚îÇ    password      ‚îÇ           ‚îÇ    description   ‚îÇ
‚îÇ    created_at    ‚îÇ           ‚îÇ    color         ‚îÇ
‚îÇ    updated_at    ‚îÇ           ‚îÇ    deleted_at    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ    created_at    ‚îÇ
         ‚îÇ                     ‚îÇ    updated_at    ‚îÇ
         ‚îÇ                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ 1                             ‚îÇ 1
         ‚îÇ                               ‚îÇ
         ‚îÇ N                             ‚îÇ N
         ‚îÇ                               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îê
‚îÇ            DOCUMENTS                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ PK id                                    ‚îÇ
‚îÇ FK category_id                           ‚îÇ
‚îÇ FK user_id                               ‚îÇ
‚îÇ    title                                 ‚îÇ
‚îÇ    document_number (UK)                  ‚îÇ
‚îÇ    description                           ‚îÇ
‚îÇ    file_name                             ‚îÇ
‚îÇ    file_path                             ‚îÇ
‚îÇ    file_type                             ‚îÇ
‚îÇ    file_size                             ‚îÇ
‚îÇ    document_date                         ‚îÇ
‚îÇ    expiry_date                           ‚îÇ
‚îÇ    status (enum)                         ‚îÇ
‚îÇ    tags (json)                           ‚îÇ
‚îÇ    download_count                        ‚îÇ
‚îÇ    created_at                            ‚îÇ
‚îÇ    updated_at                            ‚îÇ
‚îÇ    deleted_at                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ 1
         ‚îÇ
         ‚îÇ N
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    ACTIVITY_LOGS         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ PK id                    ‚îÇ
‚îÇ FK user_id               ‚îÇ
‚îÇ    action                ‚îÇ
‚îÇ    model_type            ‚îÇ
‚îÇ    model_id              ‚îÇ
‚îÇ    description           ‚îÇ
‚îÇ    properties (json)     ‚îÇ
‚îÇ    ip_address            ‚îÇ
‚îÇ    user_agent            ‚îÇ
‚îÇ    created_at            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>

                <h2>Tabel: documents</h2>
                <div class="card">
                    <p><span class="file-path">database/migrations/2026_02_24_000002_create_documents_table.php</span></p>
                    <table>
                        <tr>
                            <th>Column</th>
                            <th>Type</th>
                            <th>Constraints</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>id</td>
                            <td>BIGINT</td>
                            <td>PK, AUTO_INCREMENT</td>
                            <td>Primary key</td>
                        </tr>
                        <tr>
                            <td>category_id</td>
                            <td>BIGINT</td>
                            <td>FK, NOT NULL</td>
                            <td>Foreign key to categories</td>
                        </tr>
                        <tr>
                            <td>user_id</td>
                            <td>BIGINT</td>
                            <td>FK, NOT NULL</td>
                            <td>Foreign key to users</td>
                        </tr>
                        <tr>
                            <td>title</td>
                            <td>VARCHAR(255)</td>
                            <td>NOT NULL</td>
                            <td>Judul dokumen</td>
                        </tr>
                        <tr>
                            <td>document_number</td>
                            <td>VARCHAR(255)</td>
                            <td>UNIQUE</td>
                            <td>Auto-generated number</td>
                        </tr>
                        <tr>
                            <td>file_path</td>
                            <td>VARCHAR(255)</td>
                            <td>NOT NULL</td>
                            <td>Path to file storage</td>
                        </tr>
                        <tr>
                            <td>file_size</td>
                            <td>BIGINT</td>
                            <td>NOT NULL</td>
                            <td>Size in bytes</td>
                        </tr>
                        <tr>
                            <td>status</td>
                            <td>ENUM</td>
                            <td>'active','archived','expired'</td>
                            <td>Document status</td>
                        </tr>
                        <tr>
                            <td>created_at</td>
                            <td>TIMESTAMP</td>
                            <td>NULL</td>
                            <td>Created timestamp</td>
                        </tr>
                        <tr>
                            <td>deleted_at</td>
                            <td>TIMESTAMP</td>
                            <td>NULL (Soft delete)</td>
                            <td>Soft delete timestamp</td>
                        </tr>
                    </table>

                    <h3>Indexes</h3>
                    <ul>
                        <li><code>PRIMARY KEY (id)</code></li>
                        <li><code>UNIQUE KEY (document_number)</code></li>
                        <li><code>INDEX (category_id, status)</code> - For filtering</li>
                        <li><code>INDEX (user_id)</code> - For data isolation</li>
                        <li><code>INDEX (document_date)</code> - For date filtering</li>
                        <li><code>INDEX (title)</code> - For search</li>
                    </ul>

                    <h3>Foreign Keys</h3>
                    <ul>
                        <li><code>category_id REFERENCES categories(id) ON DELETE CASCADE</code></li>
                        <li><code>user_id REFERENCES users(id) ON DELETE CASCADE</code></li>
                    </ul>
                </div>

                <h2>Database Migrations (KUK 024)</h2>
                <div class="card">
                    <p><strong>Apa itu Migration?</strong></p>
                    <p>Version control untuk database schema. Seperti Git untuk code, migration untuk database.</p>

                    <p><strong>Commands:</strong></p>
                    <pre># Run all pending migrations
php artisan migrate

# Rollback last batch
php artisan migrate:rollback

# Drop all + re-migrate (DANGER!)
php artisan migrate:fresh

# Migrate + seed data
php artisan migrate:fresh --seed</pre>

                    <p><strong>Benefits:</strong></p>
                    <ul>
                        <li>Team collaboration - semua developer dapat schema yang sama</li>
                        <li>Environment consistency - dev, staging, production sama</li>
                        <li>Rollback capability - bisa undo changes</li>
                        <li>Documentation - struktur DB ter-documented di code</li>
                    </ul>
                </div>

                <h2>Query Optimization</h2>
                <div class="card">
                    <h3>1. Eager Loading (Prevent N+1)</h3>
                    <pre>// ‚ùå BAD - N+1 problem (1 + N queries)
$documents = Document::all();
foreach ($documents as $doc) {
    echo $doc->category->name;  // Query per iteration
}

// ‚úÖ GOOD - Eager loading (2 queries only)
$documents = Document::with('category')->get();
foreach ($documents as $doc) {
    echo $doc->category->name;  // No additional query
}</pre>

                    <h3>2. Select Specific Columns</h3>
                    <pre>// ‚ùå BAD - Select all columns
$documents = Document::all();

// ‚úÖ GOOD - Select only needed
$documents = Document::select('id', 'title', 'document_number')->get();</pre>

                    <h3>3. Pagination</h3>
                    <pre>// ‚ùå BAD - Load all data
$documents = Document::all();

// ‚úÖ GOOD - Paginate (15 per page)
$documents = Document::paginate(15);</pre>

                    <h3>4. Use Indexes</h3>
                    <pre>// Query dengan WHERE user_id ‚Üí fast karena ada index
Document::where('user_id', 1)->get();

// Query dengan WHERE title ‚Üí fast karena ada index
Document::where('title', 'like', '%surat%')->get();</pre>
                </div>
            </div>

            <!-- KUK RINGKAS -->
            <div id="kuk" class="section">
                <h1>üìã KUK BNSP (Ringkas)</h1>

                <div class="warning">
                    <strong>‚ö†Ô∏è Untuk Detail Lengkap, Buka File Terpisah:</strong><br>
                    <span class="file-path">kuk-mapping.html</span> (17 KUK lengkap dengan penjelasan detail)
                </div>

                <h2>Summary: 17 KUK Terimplementasi</h2>
                <div class="success">
                    <ul style="list-style: none; padding: 0;">
                        <li><strong>üìê Perancangan (4 KUK):</strong> Tools, Skalabilitas, Framework, UX</li>
                        <li><strong>üíª Implementasi (10 KUK):</strong> MVC, OOP, SQL, DB Access, Algoritma, Migrasi, Debug, Multimedia, Review, Testing</li>
                        <li><strong>‚öôÔ∏è Operasi (3 KUK):</strong> Alert, Monitoring, Update</li>
                    </ul>
                </div>

                <h2>7 KUK Prioritas untuk Demo</h2>
                <div class="card">
                    <span class="badge purple">003 - Framework Laravel</span>
                    <span class="badge purple">006 - UX Design</span>
                    <span class="badge purple">017 - MVC Pattern</span>
                    <span class="badge purple">018 - OOP Relationships</span>
                    <span class="badge purple">022 - Algoritma Auto-numbering</span>
                    <span class="badge purple">030 - File Upload & Preview</span>
                    <span class="badge purple">044 - Flash Messages</span>
                </div>

                <h2>Quick Mapping</h2>
                <table>
                    <tr>
                        <th>KUK</th>
                        <th>Judul</th>
                        <th>File</th>
                        <th>Line</th>
                    </tr>
                    <tr>
                        <td>001</td>
                        <td>Tools</td>
                        <td>composer.json</td>
                        <td>8-30</td>
                    </tr>
                    <tr>
                        <td>003</td>
                        <td>Framework</td>
                        <td>config/app.php</td>
                        <td>All</td>
                    </tr>
                    <tr>
                        <td>017</td>
                        <td>MVC</td>
                        <td>Controllers/</td>
                        <td>All</td>
                    </tr>
                    <tr>
                        <td>018</td>
                        <td>OOP</td>
                        <td>Models/Document.php</td>
                        <td>55-65</td>
                    </tr>
                    <tr>
                        <td>022</td>
                        <td>Algoritma</td>
                        <td>DocumentController.php</td>
                        <td>68-116</td>
                    </tr>
                    <tr>
                        <td>030</td>
                        <td>Multimedia</td>
                        <td>DocumentController.php, show.blade.php</td>
                        <td>147-160, 125-140</td>
                    </tr>
                    <tr>
                        <td>044</td>
                        <td>Alert</td>
                        <td>layouts/main.blade.php</td>
                        <td>402-461</td>
                    </tr>
                </table>

                <div class="info">
                    <strong>üìå Strategi Presentasi KUK (8 menit):</strong>
                    <ol>
                        <li><strong>1 menit:</strong> Overview - "17 KUK dalam 3 kelompok"</li>
                        <li><strong>5 menit:</strong> Demo 7 KUK prioritas dengan show code</li>
                        <li><strong>2 menit:</strong> Sebutkan 10 KUK lainnya dari tabel mapping</li>
                    </ol>
                </div>
            </div>

            <!-- Q&A -->
            <div id="qa" class="section">
                <h1>üí¨ Q&A Penting</h1>

                <div class="card">
                    <h3>Q: Kenapa pilih Laravel?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li>MVC Pattern (terstruktur & maintainable)</li>
                        <li>Eloquent ORM (query mudah & aman dari SQL injection)</li>
                        <li>Security built-in (CSRF, XSS prevention)</li>
                        <li>Ecosystem besar (banyak packages)</li>
                        <li>Development cepat (artisan commands, migrations)</li>
                        <li>Dokumentasi lengkap & community support besar</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Jelaskan flow MVC</h3>
                    <p><strong>A:</strong></p>
                    <p>User ‚Üí Route ‚Üí Controller ‚Üí Model ‚Üí Database ‚Üí Controller ‚Üí View ‚Üí Response</p>
                    <p><strong>Contoh konkrit:</strong></p>
                    <ol>
                        <li>User akses <code>/documents</code></li>
                        <li>Route tangkap request ‚Üí <code>DocumentController@index()</code></li>
                        <li>Controller call Model ‚Üí <code>Document::where()->get()</code></li>
                        <li>Model query Database ‚Üí <code>SELECT * FROM documents</code></li>
                        <li>Controller return View ‚Üí <code>view('documents.index')</code></li>
                        <li>Browser render HTML</li>
                    </ol>
                </div>

                <div class="card">
                    <h3>Q: Bagaimana cara kerja auto document number?</h3>
                    <p><strong>A:</strong></p>
                    <ol>
                        <li>Ambil kategori (e.g., "Surat Masuk")</li>
                        <li>Generate code "SM" dari mapping atau 3 huruf pertama</li>
                        <li>Get year/month current (2026/02)</li>
                        <li>Build prefix "SM/2026/02/"</li>
                        <li>Query last document dengan prefix sama</li>
                        <li>Extract nomor terakhir, increment +1</li>
                        <li>Pad 4 digit dengan leading zeros</li>
                        <li>Return "SM/2026/02/0001"</li>
                    </ol>
                </div>

                <div class="card">
                    <h3>Q: Apa itu Soft Delete?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li>Data tidak dihapus permanent dari database</li>
                        <li>Hanya tambah timestamp di kolom <code>deleted_at</code></li>
                        <li>Data masih ada di database, tapi hidden dari query normal</li>
                        <li>Bisa di-restore kapan saja dengan <code>restore()</code></li>
                        <li><strong>Benefit:</strong> Data recovery, audit trail, compliance</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Jelaskan data isolation per user</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li>Setiap user hanya bisa lihat & akses dokumen milik mereka</li>
                        <li>Semua query di-filter: <code>where('user_id', auth()->id())</code></li>
                        <li>Authorization check sebelum show/edit/delete</li>
                        <li>Jika user coba akses dokumen orang lain ‚Üí 403 Forbidden</li>
                        <li><strong>Implementasi:</strong> DocumentController Line 25, 190, 211, 268</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Security apa saja yang diimplementasi?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li><strong>Authentication:</strong> Laravel Breeze (register, login, password hash)</li>
                        <li><strong>Authorization:</strong> User access control (per-user data)</li>
                        <li><strong>CSRF:</strong> Token protection pada semua form</li>
                        <li><strong>SQL Injection:</strong> Eloquent ORM auto-escape</li>
                        <li><strong>XSS:</strong> Blade auto-escape output</li>
                        <li><strong>File Validation:</strong> Type & size limit</li>
                        <li><strong>Mass Assignment:</strong> $fillable protection</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Apa itu Database Migration?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li>Version control untuk database schema</li>
                        <li>Tracking perubahan struktur database</li>
                        <li>Bisa rollback jika ada masalah</li>
                        <li>Team collaboration via Git</li>
                        <li>Consistency antar environment (dev, staging, production)</li>
                        <li><strong>Command:</strong> <code>php artisan migrate</code></li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Bagaimana handle file besar?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li><strong>Max Size:</strong> 10MB (configurable di validation)</li>
                        <li><strong>Chunked Upload:</strong> Bisa implement untuk file > 10MB</li>
                        <li><strong>Queue:</strong> Process upload di background dengan Laravel Queue</li>
                        <li><strong>Cloud Storage:</strong> Bisa pindah ke S3/Cloud Storage untuk scalability</li>
                        <li><strong>Compression:</strong> Compress file sebelum upload (optional)</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Q: Bagaimana testing dilakukan?</h3>
                    <p><strong>A:</strong></p>
                    <ul>
                        <li><strong>Framework:</strong> PHPUnit (built-in Laravel)</li>
                        <li><strong>Test Types:</strong> Feature tests (HTTP) & Unit tests (functions)</li>
                        <li><strong>Test Cases:</strong> 40 test cases covering authentication, CRUD, isolation</li>
                        <li><strong>Result:</strong> 100% pass rate (40/40 passed)</li>
                        <li><strong>Command:</strong> <code>php artisan test</code></li>
                        <li><strong>CI/CD:</strong> Bisa integrate dengan GitHub Actions untuk auto testing</li>
                    </ul>
                </div>

                <div class="success">
                    <strong>üí° Tips Jawab Pertanyaan:</strong>
                    <ul style="margin-top: 10px;">
                        <li>Stay calm, tarik napas sebelum jawab</li>
                        <li>Jawab dengan percaya diri</li>
                        <li>Tunjukkan code kalau perlu</li>
                        <li>Kalau tidak tahu, jujur: "Saya belum implement fitur itu, tapi saya tahu konsepnya..."</li>
                        <li>Fokus ke fitur yang paling dikuasai</li>
                        <li>Beri contoh konkrit dari aplikasi</li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Remove active from all nav items
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Add active to clicked nav item
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
